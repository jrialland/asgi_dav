<?xml version="1.0" encoding="UTF-8"?>
<D:multistatus xmlns:D="DAV:">
  {% for info in listing %}
  <D:response>
    <D:href>{{ concat_uri(path, info.name) }}</D:href>
    <D:propstat>
      <D:prop>
        <D:displayname>{{ info.name }}</D:displayname>
        {% if info.is_dir %}<D:resourcetype><D:collection/></D:resourcetype>{% endif %}
        {% if info.is_file %}
        <D:resourcetype/>
        <D:getlastmodified>{{ info.lastmodified }}</D:getlastmodified>
        <D:getcontentlength>{{ info.contentlength }}</D:getcontentlength>
        <D:getcontenttype>{{ info.contenttype }}</D:getcontenttype>
        {% endif %}
      </D:prop>
      <D:status>HTTP/1.1 200 OK</D:status>
    </D:propstat>
  </D:response>
  {% endfor %}
</D:multistatus>